{"openapi":"3.0.2","info":{"title":"Predict API","description":"API powering the Predict feature of Algolia.","version":"1.0.0"},"components":{"securitySchemes":{"appId":{"type":"apiKey","in":"header","name":"X-Algolia-Application-Id"},"apiKey":{"type":"apiKey","in":"header","name":"X-Algolia-API-Key"}}},"servers":[{"url":"https://predict.{region}.algolia.com","variables":{"region":{"enum":["eu","us"],"default":"eu","description":"Region where your Predict data is stored and processed:\n  * `eu` - Europe\n  * `us` - United States.\n"}}}],"security":[{"appId":[],"apiKey":[]}],"tags":[{"name":"models","x-displayName":"Models","description":"Manage models."},{"name":"profiles","x-displayName":"Profiles","description":"Manage users' profiles."},{"name":"segments","x-displayName":"Segments","description":"Manage segments."}],"x-tagGroups":[{"name":"General","tags":["profiles","models","segments"]}],"paths":{"/1{path}":{"get":{"operationId":"get","summary":"Send requests to the Algolia REST API.","description":"This method allow you to send requests to the Algolia REST API.","parameters":[{"name":"path","in":"path","description":"The path of the API endpoint to target, anything after the /1 needs to be specified.","required":true,"schema":{"type":"string","example":"/keys"}},{"name":"parameters","in":"query","description":"Query parameters to be applied to the current query.","schema":{"type":"object","additionalProperties":true}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Bad request or request arguments.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"402":{"description":"This feature is not enabled on your Algolia account.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"403":{"description":"Method not allowed with this API key.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}},"post":{"operationId":"post","requestBody":{"description":"The parameters to send with the custom request.","content":{"application/json":{"schema":{"type":"object"}}}},"summary":"Send requests to the Algolia REST API.","description":"This method allow you to send requests to the Algolia REST API.","parameters":[{"name":"path","in":"path","description":"The path of the API endpoint to target, anything after the /1 needs to be specified.","required":true,"schema":{"type":"string","example":"/keys"}},{"name":"parameters","in":"query","description":"Query parameters to be applied to the current query.","schema":{"type":"object","additionalProperties":true}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Bad request or request arguments.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"402":{"description":"This feature is not enabled on your Algolia account.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"403":{"description":"Method not allowed with this API key.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}},"put":{"operationId":"put","requestBody":{"description":"The parameters to send with the custom request.","content":{"application/json":{"schema":{"type":"object"}}}},"summary":"Send requests to the Algolia REST API.","description":"This method allow you to send requests to the Algolia REST API.","parameters":[{"name":"path","in":"path","description":"The path of the API endpoint to target, anything after the /1 needs to be specified.","required":true,"schema":{"type":"string","example":"/keys"}},{"name":"parameters","in":"query","description":"Query parameters to be applied to the current query.","schema":{"type":"object","additionalProperties":true}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Bad request or request arguments.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"402":{"description":"This feature is not enabled on your Algolia account.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"403":{"description":"Method not allowed with this API key.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}},"delete":{"operationId":"del","summary":"Send requests to the Algolia REST API.","description":"This method allow you to send requests to the Algolia REST API.","parameters":[{"name":"path","in":"path","description":"The path of the API endpoint to target, anything after the /1 needs to be specified.","required":true,"schema":{"type":"string","example":"/keys"}},{"name":"parameters","in":"query","description":"Query parameters to be applied to the current query.","schema":{"type":"object","additionalProperties":true}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Bad request or request arguments.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"402":{"description":"This feature is not enabled on your Algolia account.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"403":{"description":"Method not allowed with this API key.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/users/{userID}/fetch":{"post":{"tags":["profiles"],"operationId":"fetchUserProfile","description":"Get predictions, properties (raw, computed or custom) and segments (computed or custom) for a user profile.","summary":"Get user profile.","parameters":[{"name":"userID","in":"path","required":true,"schema":{"type":"string"},"description":"User ID for authenticated users or cookie ID for non-authenticated repeated users (visitors)."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"oneOf":[{"type":"object","required":["modelsToRetrieveParam"],"properties":{"modelsToRetrieve":{"type":"array","items":{"type":"string","enum":["funnel_stage","order_value","affinities"]}}}},{"type":"object","required":["typesToRetrieveParam"],"properties":{"typesToRetrieve":{"type":"array","items":{"type":"string","enum":["properties","segments"]}}}},{"allOf":[{"type":"object","required":["modelsToRetrieveParam"],"properties":{"modelsToRetrieve":{"type":"array","items":{"type":"string","enum":["funnel_stage","order_value","affinities"]}}}},{"type":"object","required":["typesToRetrieveParam"],"properties":{"typesToRetrieve":{"type":"array","items":{"type":"string","enum":["properties","segments"]}}}}]}]}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"fetchUserProfileResponse","type":"object","required":["user"],"properties":{"user":{"type":"string"},"predictions":{"type":"object","title":"predictions","properties":{"funnel_stage":{"oneOf":[{"type":"object","description":"Prediction for the **funnel_stage** model.","properties":{"value":{"type":"array","items":{"title":"funnel_stage","type":"object","properties":{"name":{"type":"string"},"probability":{"type":"number","format":"double","minimum":0,"maximum":1}},"required":["name","probability"]}},"lastUpdatedAt":{"type":"string"}},"required":["value","lastUpdatedAt"]},{"type":"object","description":"The error when the model is not available.","properties":{"error":{"type":"string"}},"required":["error"]}]},"order_value":{"oneOf":[{"type":"object","description":"Prediction for the **order_value** model.","properties":{"value":{"type":"number","format":"double","minimum":0},"lastUpdatedAt":{"type":"string"}},"required":["value","lastUpdatedAt"]},{"type":"object","description":"The error when the model is not available.","properties":{"error":{"type":"string"}},"required":["error"]}]},"affinities":{"oneOf":[{"type":"object","description":"Prediction for the **affinities** model.","properties":{"value":{"type":"array","items":{"title":"affinity","type":"object","properties":{"name":{"type":"string"},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"double"},{"type":"boolean"}]},"probability":{"type":"number","format":"double","minimum":0,"maximum":1}},"required":["name","value","probability"]}},"lastUpdatedAt":{"type":"string"}},"required":["value","lastUpdatedAt"]},{"type":"object","description":"The error when the model is not available.","properties":{"error":{"type":"string"}},"required":["error"]}]}}},"properties":{"type":"object","title":"properties","description":"Properties for the user profile.","properties":{"raw":{"type":"object","description":"Raw user properties (key-value pairs)."},"computed":{"type":"object","description":"Computed user properties (key-value pairs)."},"custom":{"type":"object","description":"Custom user properties (key-value pairs)."}}},"segments":{"type":"object","title":"segments","required":["computed","custom"],"description":"Segments that the user belongs to.","properties":{"computed":{"type":"array","description":"List of computed segments IDs.","items":{"type":"string"}},"custom":{"type":"array","description":"List of custom segments IDs.","items":{"type":"string"}}}}}}}}},"400":{"description":"ModelsToRetrieve or typesToRetrieve must be set.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"User not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"405":{"description":"Method not allowed with this API key.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/users/{userID}":{"delete":{"tags":["profiles"],"operationId":"deleteUserProfile","description":"Delete all data and predictions associated with an authenticated user (userID) or an anonymous user (cookieID, sessionID).","summary":"Delete user profile.","parameters":[{"name":"userID","in":"path","required":true,"schema":{"type":"string"},"description":"User ID for authenticated users or cookie ID for non-authenticated repeated users (visitors)."}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"deleteUserProfileResponse","type":"object","required":["user","deletedUntil"],"properties":{"user":{"type":"string","description":"The ID of the user that was deleted."},"deletedUntil":{"type":"string","description":"The time the same user ID will be imported again when the data is ingested."}}}}}},"401":{"description":"Invalid credentials.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"User not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Invalid user ID or application ID.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/users":{"post":{"tags":["profiles"],"operationId":"fetchAllUserProfiles","description":"Get all users with predictions in the provided application.","summary":"Get all user profiles.","requestBody":{"required":true,"content":{"application/json":{"schema":{"oneOf":[{"type":"object","required":["modelsToRetrieveParam"],"properties":{"modelsToRetrieve":{"type":"array","items":{"type":"string","enum":["funnel_stage","order_value","affinities"]}}}},{"type":"object","required":["typesToRetrieveParam"],"properties":{"typesToRetrieve":{"type":"array","items":{"type":"string","enum":["properties","segments"]}}}},{"type":"object","properties":{"nextPageToken":{"type":"string","description":"The token is used to navigate forward in the user list. To navigate from the current user list to the next page, the API generates the next page token and it sends the token in the response, beside the current user list. NOTE: This body param cannot be used with `previousPageToken` at the same time."}}},{"type":"object","properties":{"previousPageToken":{"type":"string","description":"The token is used to navigate backward in the user list. To navigate from the current user list to the previous page, the API generates the previous page token and it sends the token in the response, beside the current user list. NOTE: This body param cannot be used with `nextPageToken` at the same time."}}},{"type":"object","properties":{"limit":{"type":"integer"}}}]}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"fetchAllUserProfilesResponse","type":"object","required":["users"],"properties":{"users":{"type":"array","items":{"type":"object","required":["user"],"properties":{"user":{"type":"string"},"predictions":{"type":"object","title":"predictions","properties":{"funnel_stage":{"oneOf":[{"type":"object","description":"Prediction for the **funnel_stage** model.","properties":{"value":{"type":"array","items":{"title":"funnel_stage","type":"object","properties":{"name":{"type":"string"},"probability":{"type":"number","format":"double","minimum":0,"maximum":1}},"required":["name","probability"]}},"lastUpdatedAt":{"type":"string"}},"required":["value","lastUpdatedAt"]},{"type":"object","description":"The error when the model is not available.","properties":{"error":{"type":"string"}},"required":["error"]}]},"order_value":{"oneOf":[{"type":"object","description":"Prediction for the **order_value** model.","properties":{"value":{"type":"number","format":"double","minimum":0},"lastUpdatedAt":{"type":"string"}},"required":["value","lastUpdatedAt"]},{"type":"object","description":"The error when the model is not available.","properties":{"error":{"type":"string"}},"required":["error"]}]},"affinities":{"oneOf":[{"type":"object","description":"Prediction for the **affinities** model.","properties":{"value":{"type":"array","items":{"title":"affinity","type":"object","properties":{"name":{"type":"string"},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"double"},{"type":"boolean"}]},"probability":{"type":"number","format":"double","minimum":0,"maximum":1}},"required":["name","value","probability"]}},"lastUpdatedAt":{"type":"string"}},"required":["value","lastUpdatedAt"]},{"type":"object","description":"The error when the model is not available.","properties":{"error":{"type":"string"}},"required":["error"]}]}}},"properties":{"type":"object","title":"properties","description":"Properties for the user profile.","properties":{"raw":{"type":"object","description":"Raw user properties (key-value pairs)."},"computed":{"type":"object","description":"Computed user properties (key-value pairs)."},"custom":{"type":"object","description":"Custom user properties (key-value pairs)."}}},"segments":{"type":"object","title":"segments","required":["computed","custom"],"description":"Segments that the user belongs to.","properties":{"computed":{"type":"array","description":"List of computed segments IDs.","items":{"type":"string"}},"custom":{"type":"array","description":"List of custom segments IDs.","items":{"type":"string"}}}}}}},"previousPageToken":{"type":"string","description":"The token is used to navigate backward in the user list. To navigate from the current user list to the previous page, the API generates the previous page token and it sends the token in the response, beside the current user list. NOTE: This body param cannot be used with `nextPageToken` at the same time."},"nextPageToken":{"type":"string","description":"The token is used to navigate forward in the user list. To navigate from the current user list to the next page, the API generates the next page token and it sends the token in the response, beside the current user list. NOTE: This body param cannot be used with `previousPageToken` at the same time."}}}}}},"400":{"description":"Could not parse the request body.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"401":{"description":"Invalid credentials.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Unprocessable Entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/predict/modeltypes":{"get":{"tags":["models"],"operationId":"getAvailableModelTypes","summary":"Get a list of available model types.","description":"Get a list of all available model types. Each model type can be activated more than once, by selecting a different data source.","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"getAvailableModelTypesResponse","type":"array","items":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string","description":"Name of the model."},"type":{"type":"string","description":"Description of the model."},"compatibleSources":{"type":"array","items":{"type":"string","enum":["bigquery"]}},"dataRequirements":{"type":"object","additionalProperties":false,"properties":{"minUsers":{"type":"integer","description":"Minimum number of users required for this model."},"minDays":{"type":"integer","description":"Minimum number of days model needs to run."}},"required":["minUsers","minDays"]}},"required":["name","type","compatibleSources","dataRequirements"]}}}}},"401":{"description":"Invalid credentials.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Unprocessable Entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/predict/models/{modelID}":{"get":{"tags":["models"],"operationId":"getModelInstanceConfig","summary":"Get a model’s instance configuration.","description":"Get the configuration for a model that was activated.","parameters":[{"name":"modelID","in":"path","required":true,"schema":{"type":"string"},"description":"The ID of the model to retrieve."}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"getModelInstanceConfigResponse","type":"object","additionalProperties":false,"properties":{"modelID":{"type":"string","description":"ID of the model."},"name":{"type":"string","description":"Name of model instance."},"type":{"description":"Type of the model.","type":"string","enum":["funnel_stage","order_value","affinities"]},"sourceID":{"type":"string"},"index":{"type":"string"},"modelAttributes":{"type":"array","items":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string"},"values":{"type":"array","items":{"type":"string"}}},"required":["name"]}},"lastTrained":{"type":"string","description":"The date and time this model instance was last trained."},"lastInference":{"type":"string","description":"The date and time this model instance generated its last inference."},"errorMessage":{"type":"string"},"modelStatus":{"type":"string","enum":["pending","active","invalid","inactive"],"description":"`pending` - model has just been created and the pipelines are being set up for the first train & inference. \\\n`active` - model is running and generating predictions. \\\n`invalid` - model has failed training (ex. can’t retrieve data from source). An additional `errorMessage` field will be set for this status. \\\n`inactive` - model has been deactivated from the dashboard. Pipelines still exist but they are not currently running.\n"}},"required":["modelID","name","type","sourceID","index","lastTrained","lastInference","modelStatus"]}}}},"401":{"description":"Invalid credentials.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Unprocessable Entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}},"post":{"tags":["models"],"operationId":"updateModelInstance","summary":"Update a model instance.","description":"Update a model’s configuration.","parameters":[{"name":"modelID","in":"path","required":true,"schema":{"type":"string"},"description":"The ID of the model to retrieve."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"The model’s instance name."},"modelAttributes":{"type":"array","items":{"type":"string","description":"List of items attributes that will be used in the model. This param is required if the model `type` needs it (e.g. `affinities`, `funnel_stage`)."}},"modelStatus":{"type":"string","enum":["active","inactive"],"description":"`active` - model is running and generating predictions. The active value is allowed only if the current status of the model is `inactive`. \\\n`inactive` - model training and inference have been paused. The inactive value is allowed only if the current status of the model is `active`.\n"}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"updateModelInstanceResponse","type":"object","additionalProperties":false,"properties":{"modelID":{"type":"string","description":"The ID of the model."},"updatedAt":{"type":"string","description":"Date of last update (ISO-8601 format)."}},"required":["modelID","updatedAt"]}}}},"401":{"description":"Invalid credentials.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Unprocessable Entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}},"delete":{"tags":["models"],"operationId":"deleteModelInstance","summary":"Delete a model instance.","description":"Delete the model’s configuration, pipelines and generated predictions.","parameters":[{"name":"modelID","in":"path","required":true,"schema":{"type":"string"},"description":"The ID of the model to retrieve."}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"deleteModelInstanceResponse","type":"object","additionalProperties":false,"properties":{"modelID":{"type":"string","description":"The ID of the model."},"deletedUntil":{"type":"string","description":"The date until which you can safely consider the data as being deleted."}},"required":["modelID","deletedUntil"]}}}},"401":{"description":"Invalid credentials.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Unprocessable Entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/predict/models":{"get":{"tags":["models"],"operationId":"getModelInstances","summary":"Get model instances.","description":"Get a list of all model instances.","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"getModelInstancesResponse","type":"array","items":{"type":"object","additionalProperties":false,"properties":{"modelID":{"type":"string","description":"ID of the model."},"name":{"type":"string","description":"Name of model instance."},"type":{"description":"Type of the model.","type":"string","enum":["funnel_stage","order_value","affinities"]},"sourceID":{"type":"string"},"index":{"type":"string"},"modelAttributes":{"type":"array","items":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string"},"values":{"type":"array","items":{"type":"string"}}},"required":["name"]}},"lastTrained":{"type":"string","description":"The date and time this model instance was last trained."},"lastInference":{"type":"string","description":"The date and time this model instance generated its last inference."},"errorMessage":{"type":"string"},"modelStatus":{"type":"string","enum":["pending","active","invalid","inactive"],"description":"`pending` - model has just been created and the pipelines are being set up for the first train & inference. \\\n`active` - model is running and generating predictions. \\\n`invalid` - model has failed training (ex. can’t retrieve data from source). An additional `errorMessage` field will be set for this status. \\\n`inactive` - model has been deactivated from the dashboard. Pipelines still exist but they are not currently running.\n"}},"required":["modelID","name","type","sourceID","index","lastTrained","lastInference","modelStatus"]}}}}},"401":{"description":"Invalid credentials.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Unprocessable Entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}},"post":{"tags":["models"],"operationId":"activateModelInstance","summary":"Activate a model instance.","description":"Activate an existing model template. This action triggers the training and inference pipelines for the selected model.  The model is added with `modelStatus=pending`. If a model with the exact same source & index already exists, the API endpoint returns an error.\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","enum":["funnel_stage","order_value","affinities"]},"name":{"type":"string","description":"The model’s instance name."},"sourceID":{"type":"string","description":"The data source ID, as returned by the (external) sources API."},"index":{"type":"string","description":"The index name."},"modelAttributes":{"type":"array","items":{"type":"string","description":"List of items attributes that will be used in the model. This param is required if the model `type` needs it (e.g. `affinities`, `funnel_stage`)."}}},"required":["type","name","sourceID","index"]}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"activateModelInstanceResponse","type":"object","additionalProperties":false,"properties":{"modelID":{"type":"string","description":"The ID of the model."},"updatedAt":{"type":"string","description":"Date of last update (ISO-8601 format)."}},"required":["modelID","updatedAt"]}}}},"401":{"description":"Invalid credentials.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Unprocessable Entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/predict/models/{modelID}/metrics":{"get":{"tags":["models"],"operationId":"getModelMetrics","summary":"Get a model’s instance metrics.","description":"Get the model instance’ training metrics.","parameters":[{"name":"modelID","in":"path","required":true,"schema":{"type":"string"},"description":"The ID of the model to retrieve."}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"getModelMetricsResponse","type":"object","additionalProperties":false,"properties":{"modelID":{"type":"string","description":"The ID of the model."},"metrics":{"type":"array","items":{"type":"object","additionalProperties":false,"properties":{"precision":{"type":"number","format":"double"},"recall":{"type":"number","format":"double"},"mrr":{"type":"number","format":"double"},"coverage":{"type":"number","format":"double"},"f1_score":{"type":"number","format":"double"},"updatedAt":{"type":"string","description":"Date of last update (ISO-8601 format)."}}}}},"required":["modelID","metrics"]}}}},"401":{"description":"Invalid credentials.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Unprocessable Entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/segments/{segmentID}/users":{"post":{"tags":["segments"],"operationId":"getSegmentUsers","summary":"Get segment users.","description":"Get the profiles of users that belong to a segment.","parameters":[{"name":"segmentID","in":"path","required":true,"schema":{"type":"string"},"description":"The ID of the Segment to fetch."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"oneOf":[{"type":"object","required":["modelsToRetrieveParam"],"properties":{"modelsToRetrieve":{"type":"array","items":{"type":"string","enum":["funnel_stage","order_value","affinities"]}}}},{"type":"object","required":["typesToRetrieveParam"],"properties":{"typesToRetrieve":{"type":"array","items":{"type":"string","enum":["properties","segments"]}}}},{"type":"object","properties":{"nextPageToken":{"type":"string","description":"The token is used to navigate forward in the user list. To navigate from the current user list to the next page, the API generates the next page token and it sends the token in the response, beside the current user list. NOTE: This body param cannot be used with `previousPageToken` at the same time."}}},{"type":"object","properties":{"previousPageToken":{"type":"string","description":"The token is used to navigate backward in the user list. To navigate from the current user list to the previous page, the API generates the previous page token and it sends the token in the response, beside the current user list. NOTE: This body param cannot be used with `nextPageToken` at the same time."}}},{"type":"object","properties":{"limit":{"type":"integer"}}}]}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"getSegmentUsersResponse","type":"object","required":["segmentID","users"],"properties":{"segmentID":{"type":"string","description":"The ID of the segment."},"users":{"type":"array","items":{"type":"object","required":["user"],"properties":{"user":{"type":"string"},"predictions":{"type":"object","title":"predictions","properties":{"funnel_stage":{"oneOf":[{"type":"object","description":"Prediction for the **funnel_stage** model.","properties":{"value":{"type":"array","items":{"title":"funnel_stage","type":"object","properties":{"name":{"type":"string"},"probability":{"type":"number","format":"double","minimum":0,"maximum":1}},"required":["name","probability"]}},"lastUpdatedAt":{"type":"string"}},"required":["value","lastUpdatedAt"]},{"type":"object","description":"The error when the model is not available.","properties":{"error":{"type":"string"}},"required":["error"]}]},"order_value":{"oneOf":[{"type":"object","description":"Prediction for the **order_value** model.","properties":{"value":{"type":"number","format":"double","minimum":0},"lastUpdatedAt":{"type":"string"}},"required":["value","lastUpdatedAt"]},{"type":"object","description":"The error when the model is not available.","properties":{"error":{"type":"string"}},"required":["error"]}]},"affinities":{"oneOf":[{"type":"object","description":"Prediction for the **affinities** model.","properties":{"value":{"type":"array","items":{"title":"affinity","type":"object","properties":{"name":{"type":"string"},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"double"},{"type":"boolean"}]},"probability":{"type":"number","format":"double","minimum":0,"maximum":1}},"required":["name","value","probability"]}},"lastUpdatedAt":{"type":"string"}},"required":["value","lastUpdatedAt"]},{"type":"object","description":"The error when the model is not available.","properties":{"error":{"type":"string"}},"required":["error"]}]}}},"properties":{"type":"object","title":"properties","description":"Properties for the user profile.","properties":{"raw":{"type":"object","description":"Raw user properties (key-value pairs)."},"computed":{"type":"object","description":"Computed user properties (key-value pairs)."},"custom":{"type":"object","description":"Custom user properties (key-value pairs)."}}},"segments":{"type":"object","title":"segments","required":["computed","custom"],"description":"Segments that the user belongs to.","properties":{"computed":{"type":"array","description":"List of computed segments IDs.","items":{"type":"string"}},"custom":{"type":"array","description":"List of custom segments IDs.","items":{"type":"string"}}}}}}},"previousPageToken":{"type":"string","description":"The token is used to navigate backward in the user list. To navigate from the current user list to the previous page, the API generates the previous page token and it sends the token in the response, beside the current user list. NOTE: This body param cannot be used with `nextPageToken` at the same time."},"nextPageToken":{"type":"string","description":"The token is used to navigate forward in the user list. To navigate from the current user list to the next page, the API generates the next page token and it sends the token in the response, beside the current user list. NOTE: This body param cannot be used with `previousPageToken` at the same time."}}}}}},"400":{"description":"Bad request or request arguments.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Unprocessable Entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/segments/{segmentID}":{"get":{"tags":["segments"],"operationId":"fetchSegment","description":"Get the segment configuration.","summary":"Get the segment configuration.","parameters":[{"name":"segmentID","in":"path","required":true,"schema":{"type":"string"},"description":"The ID of the Segment to fetch."}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"fetchSegmentResponse","type":"object","required":["segmentID","name","conditions","size","segmentStatus","type","lastUpdatedAt"],"properties":{"segmentID":{"type":"string","description":"The ID of the segment."},"name":{"type":"string","description":"The name of the segment."},"conditions":{"description":"The conditions that define which user profiles are included in the segment.\n\nCan contain operands and a maximum of 1 level of nested conditions.\n","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Nested segment conditions that only contain operands.","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}},{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}},"size":{"type":"number","format":"int64","description":"The approximate number of users that matched the segment conditions when it was created, last updated, or when model inference last ran."},"segmentStatus":{"type":"string","description":"The status of the segment.","enum":["active","pending","failed"]},"type":{"type":"string","description":"The type of the segment.","enum":["computed","custom"]},"lastUpdatedAt":{"type":"string","description":"The date and time at which the segment was last updated (RFC3339).","example":"2021-07-22T12:30:00.000Z"},"errorMessage":{"type":"string"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Status unprocessable entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}},"post":{"tags":["segments"],"operationId":"updateSegment","description":"Update a segment’s configuration.","summary":"Update segment.","parameters":[{"name":"segmentID","in":"path","required":true,"schema":{"type":"string"},"description":"The ID of the Segment to fetch."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"oneOf":[{"type":"object","properties":{"name":{"type":"string","description":"The name or description of the segment."}}},{"type":"object","properties":{"conditions":{"description":"The conditions that define which user profiles are included in the segment.\n\nCan contain operands and a maximum of 1 level of nested conditions.\n","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Nested segment conditions that only contain operands.","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}},{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}}}},{"allOf":[{"type":"object","properties":{"name":{"type":"string","description":"The name or description of the segment."}}},{"type":"object","properties":{"conditions":{"description":"The conditions that define which user profiles are included in the segment.\n\nCan contain operands and a maximum of 1 level of nested conditions.\n","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Nested segment conditions that only contain operands.","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}},{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}}}}]}]}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"updateSegmentResponse","type":"object","required":["segmentID","updatedAt"],"properties":{"segmentID":{"type":"string","description":"The ID of the segment."},"size":{"type":"number","format":"int64","description":"The approximate number of users that matched the segment conditions when it was created, last updated, or when model inference last ran."},"updatedAt":{"type":"string","description":"The date and time at which the segment was updated (RFC3339).","example":"2021-07-22T12:30:00.000Z"}}}}}},"400":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Status unprocessable entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}},"delete":{"tags":["segments"],"operationId":"deleteSegment","summary":"Delete a segment's configuration.","description":"Delete the segment’s configuration. User intents (predictions) from the segment are not deleted. All segment types (computed or custom) can be deleted.\n\nWhen the query is successful, the HTTP response is 200 OK and returns the date until which you can safely consider the data as being deleted.\n","parameters":[{"name":"segmentID","in":"path","required":true,"schema":{"type":"string"},"description":"The ID of the Segment to fetch."}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"deleteSegmentResponse","type":"object","required":["segmentID","deletedUntil"],"properties":{"segmentID":{"type":"string","description":"The ID of the segment."},"deletedUntil":{"type":"string","description":"The date and time at which the segment will be re-ingested.","example":"2021-07-22T12:30:00.000Z"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Status unprocessable entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}},"/1/segments":{"get":{"tags":["segments"],"operationId":"fetchAllSegments","description":"Get the list of segments with their configuration.","summary":"Get all segments.","parameters":[{"name":"type","in":"query","schema":{"type":"string","description":"The type of the segment.","enum":["computed","custom"]},"description":"The type of segments to fetch."}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"fetchAllSegmentsResponse","type":"array","items":{"type":"object","required":["segmentID","name","conditions","size","segmentStatus","type","lastUpdatedAt"],"properties":{"segmentID":{"type":"string","description":"The ID of the segment."},"name":{"type":"string","description":"The name of the segment."},"conditions":{"description":"The conditions that define which user profiles are included in the segment.\n\nCan contain operands and a maximum of 1 level of nested conditions.\n","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Nested segment conditions that only contain operands.","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}},{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}},"size":{"type":"number","format":"int64","description":"The approximate number of users that matched the segment conditions when it was created, last updated, or when model inference last ran."},"segmentStatus":{"type":"string","description":"The status of the segment.","enum":["active","pending","failed"]},"type":{"type":"string","description":"The type of the segment.","enum":["computed","custom"]},"lastUpdatedAt":{"type":"string","description":"The date and time at which the segment was last updated (RFC3339).","example":"2021-07-22T12:30:00.000Z"},"errorMessage":{"type":"string"}}}}}}},"404":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Status unprocessable entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}},"post":{"tags":["segments"],"operationId":"createSegment","summary":"Create a segment.","description":"Create a new segment. All segments added by this endpoint will have a computed type. The endpoint receives a filters parameter, with a syntax similar to filters for Rules.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","conditions"],"properties":{"name":{"type":"string","description":"The name or description of the segment."},"conditions":{"description":"The conditions that define which user profiles are included in the segment.\n\nCan contain operands and a maximum of 1 level of nested conditions.\n","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Nested segment conditions that only contain operands.","type":"object","required":["operator","operands"],"properties":{"operator":{"description":"Operator used to combine the operands.","type":"string","enum":["AND","OR"]},"operands":{"type":"array","items":{"oneOf":[{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}},{"description":"Operand for affinity model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.affinities\\.\\w+$","example":"predictions.affinities.color"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for affinity model predictions.","type":"object","required":["value","operator"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for funnel stage model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.funnel_stage$","example":"predictions.funnel_stage"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for funnel stage model predictions.","type":"object","required":["value","probability"],"properties":{"operator":{"description":"The operator used on the boolean filter value.","type":"string","default":"EQ","enum":["EQ","NEQ"]},"value":{"type":"string"},"probability":{"description":"Probability of the filter.","type":"object","minProperties":1,"maxProperties":2,"properties":{"LT":{"type":"number"},"LTE":{"type":"number"},"GT":{"type":"number"},"GTE":{"type":"number"}}}}}}}},{"description":"Operand for order value model predictions.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^predictions\\.order_value$","example":"predictions.order_value"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for order value model predictions.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"type":"number"}}}}}},{"description":"Operand for user profile properties.","type":"object","required":["name","filters"],"properties":{"name":{"type":"string","pattern":"^properties\\.(raw|computed|custom)\\.\\w+$","example":"properties.raw.age"},"filters":{"type":"array","minItems":1,"items":{"description":"Filter for user profile properties.","type":"object","required":["value"],"properties":{"operator":{"description":"The operator used on the numerical filter value.","type":"string","default":"EQ","enum":["EQ","NEQ","GT","GTE","LT","LTE"]},"value":{"allOf":[{"oneOf":[{"type":"string"},{"type":"number","format":"float"},{"type":"array","items":{"type":"string"}},{"type":"boolean"}]}]}}}}}}]}}}}}}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"title":"createSegmentResponse","type":"object","required":["segmentID","updatedAt"],"properties":{"segmentID":{"type":"string","description":"The ID of the segment."},"size":{"type":"number","format":"int64","description":"The approximate number of users that matched the segment conditions when it was created, last updated, or when model inference last ran."},"updatedAt":{"type":"string","description":"The date and time at which the segment was updated (RFC3339).","example":"2021-07-22T12:30:00.000Z"}}}}}},"400":{"description":"Index not found.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"422":{"description":"Status unprocessable entity.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}},"500":{"description":"Internal error.","content":{"application/json":{"schema":{"description":"Error.","type":"object","additionalProperties":true,"properties":{"message":{"type":"string","example":"Invalid Application-Id or API-Key"}}}}}}}}}}}